"use strict";var redirectUrl,form=jQuery(".flw-simple-pay-now-form"),buildConfigObj=(form&&form.on("submit",function(e){e.preventDefault();e=buildConfigObj(this);processCheckout(e)}),function(t){var e,r=jQuery(t).data(),n=r.amount||jQuery(t).find("#flw-amount").val(),a=r.email||jQuery(t).find("#flw-customer-email").val(),o=r.firstname||jQuery(t).find("#flw-first-name").val(),s=r.lastname||jQuery(t).find("#flw-last-name").val(),r=r.currency||jQuery(t).find("#flw-currency").val(),c=jQuery(t).find("#flw-payment-plan").val(),i="WP_"+t.id.toUpperCase()+"_"+(new Date).valueOf();switch(r=""==r?flw_rave_options.currency:r){case"KES":e="KE";break;case"GHS":e="GH";break;case"ZAR":e="ZA";break;default:e="NG"}return{amount:n,country:e,currency:r,custom_description:flw_rave_options.desc,custom_logo:flw_rave_options.logo,custom_title:flw_rave_options.title,customer_email:a,customer_firstname:o,customer_lastname:s,payment_method:flw_rave_options.method,PBFPubKey:flw_rave_options.pbkey,txref:i,payment_plan:c,onclose:function(){redirectTo(redirectUrl)},callback:function(e){sendPaymentRequestResponse(e,t)}}}),processCheckout=function(e){getpaidSetup(e)},sendPaymentRequestResponse=function(r,n){var e={action:"process_payment",flw_sec_code:jQuery(n).find("#flw_sec_code").val()},e=Object.assign({},e,r.tx);jQuery.post(flw_rave_options.cb_url,e).success(function(e){var t,e=JSON.parse(e);""===(redirectUrl=e.redirect_url)?(t="account"===r.tx.paymentType?r.tx.acctvalrespmsg:r.tx.vbvrespmessage,jQuery(n).find("#notice").text(t).removeClass(function(){return jQuery(n).find("#notice").attr("class")}).addClass(e.status)):setTimeout(redirectTo,5e3,redirectUrl)})},redirectTo=function(e){e&&(location.href=e)};
