var pp;
jQuery(function (f) {
	function l(t) {
		t && (location.href = t);
	}
	f('.flw-donation-form').each(function () {
		let a = f(this);
		a.find('#flw-payment-type').on('change', function () {
			var t = f(this).val(),
				e = jQuery('.flw-donation-form').find('#flw-pay-now-button'),
				t = 'DONATE ' + t.toUpperCase();
			e.text(null), console.log(e.text()), e.text(t);
		}),
			a.on('submit', function (t) {
				t.preventDefault();
				var e,
					t = a.find('button'),
					o = (t.prop('disabled', !0), a.find('input[type="text"]'));
				let n = !0;
				o.each(function () {
					var t = f(this).val();
					'string' == typeof t && '' === t.trim()
						? ((n = !1), f(this).attr('style', 'border-color: red'))
						: f(this).attr('style', 'border-color: green');
				}),
					n
						? ((o = (function (t) {
								var e = f(t).data(),
									o =
										e.amount ||
										f(t).find('#flw-amount').val(),
									n =
										e.email ||
										f(t).find('#flw-customer-email').val(),
									a =
										e.firstname ||
										f(t).find('#flw-first-name').val(),
									l =
										e.lastname ||
										f(t).find('#flw-last-name').val(),
									e =
										e.currency ||
										f(t).find('#flw-currency').val(),
									t = t.attr('id'),
									r =
										'WP_' +
										t.toUpperCase() +
										'_' +
										new Date().valueOf(),
									i =
										flw_pay_options.countries[e] ||
										flw_pay_options.countries.NGN;
								window.location.origin;
								return {
									amount: o,
									country: i,
									currency: e ?? flw_pay_options.currency,
									customer: {
										email: n,
										phone_number: null,
										name: a + ' ' + l,
									},
									payment_options: flw_pay_options.method,
									public_key: flw_pay_options.public_key,
									tx_ref: r,
									customizations: {
										title: flw_pay_options.title,
										description: flw_pay_options.desc,
										logo: flw_pay_options.logo,
									},
									form_id: t,
								};
						  })(a)),
						  console.log(o),
						  (o = o),
						  (e = a),
						  (e = {
								action: 'get_payment_url',
								flw_sec_code: f(e).find('#flw_sec_code').val(),
								payment_type: f(e)
									.find('#flw-payment-type')
									.val(),
						  }),
						  (e = Object.assign({}, e, o)),
						  f
								.post(flw_pay_options.cb_url, e)
								.success(function (t) {
									var e;
									'error' === t.status
										? f('.flw-error')
												.html(t.message)
												.attr('style', 'color:red')
										: ((e = f(
												'#flutterwave-overlay'
										  )).addClass('flutterwave-overlay'),
										  f('#flw-overlay-text').addClass(
												'flw-overlay-text'
										  ),
										  e.show(),
										  l(t.url));
								}))
						: (t.effect('shake', { times: 2 }, 300),
						  t.prop('disabled', !1));
			});
	});
});
